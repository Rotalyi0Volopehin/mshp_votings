<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Поиск голосований</title>
    <script>
        function dec_offset() {
            "usestrict";
            offset_tag.value = Number(offset_tag.value) - {{ page_size }};
        }
        function inc_offset() {
            "usestrict";
            offset_tag.value = Number(offset_tag.value) + {{ page_size }};
        }
    </script>
</head>
<body>
    <form method="post"> {% csrf_token %}
        {% for item in form %}
            <label>{{ item.label }}</label>
            {{ item }}
            <br>
        {% endfor %}
        <input type="submit" value="Искать">
        {% if not ok %}
            {% if error %}
                {{ error }}
            {% else %}
                <p>Что-то пошло не так</p>
            {% endif %}
        {% else %}
            {% if success %}
                {% if result %}
                    <table border="1">
                        <tr>
                            <th>Название</th>
                            <th>Автор</th>
                            <th>Дата создания</th>
                        </tr>
                        {% for ref in result %}
                            <tr>
                                <td> <a href={{ ref.0 }}> {{ ref.1 }} </a> </td>
                                <td> {{ ref.2 }} </td>
                                <td> {{ ref.3 }} </td>
                            </tr>
                        {% endfor %}
                    </table>
                    {% if prev_page %}
                        <input type="submit" value="Назад" onclick="dec_offset()">
                    {% else %} Назад {% endif %}
                    |
                    {% if next_page %}
                        <input type="submit" value="Вперёд" onclick="inc_offset()">
                    {% else %} Вперёд {% endif %}
                {% else %}
                    <p>Ничего не найдено</p>
                {% endif %}
            {% endif %}
        {% endif %}
    </form>
</body>
</html>